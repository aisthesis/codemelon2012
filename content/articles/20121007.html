<!--
@file content/articles/20121007.html
@url <site root>/articles.php?article=20121007
@author Marshall Farrier
@created 10/07/2012
@last-edited 10/07/2012
@description 'Playground: Clouds'
http://www.clicktorelease.com/code/css3dclouds/
-->
<div id="content-wrapper" class="outer-width-limiter">   
    <div id="content"> 
<div id="header">
    <h2>Playground: Clouds</h2>
    <div class="date">10-07-2012</div>
</div>
<?php content_sidebar($page); ?>
<div id="main-content">
    <div class="normal-columns">
    <p>This playground will explore how to create 3D clouds using CSS3 and
        JavaScript. The experiment is based on Jaume S&#225;nchez's <a 
            href="http://www.clicktorelease.com/code/css3dclouds/">CSS3D Clouds</a>.</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
    <p>blah blah blah</p>
            
    </div><!-- normal-columns -->
    <div class="playground-panel">
        <div id="viewport">
            <div id="world"></div>
        </div>
        <script>
            /*The JavaScript needs to appear here. If it is placed in a 
            separate sheet and referenced in head, items needed aren't
            yet defined.
            */
            var world = document.getElementById( 'world' ),
                viewport = document.getElementById( 'viewport' ),
                d = 0,
                worldXAngle = 0,
                worldYAngle = 0;

            window.addEventListener( 'mousewheel', onContainerMouseWheel );
            window.addEventListener( 'DOMMouseScroll', onContainerMouseWheel ); 
            window.addEventListener( 'mousemove', function( e ) {
                worldYAngle = -( .5 - ( e.clientX / window.innerWidth ) ) * 180;
                worldXAngle = ( .5 - ( e.clientY / window.innerHeight ) ) * 180;
                updateView();
            });

            function updateView() {
                var t = 'translateZ( ' + d + 'px ) rotateX( ' + worldXAngle + 'deg) rotateY( ' + worldYAngle + 'deg)';
                world.style.webkitTransform = t;
                world.style.MozTransform = t;
                world.style.oTransform = t;
            }

            function onContainerMouseWheel( event ) {
                event = event ? event : window.event;
                d = d - ( event.detail ? event.detail * -5 : event.wheelDelta / 8 );
                updateView();
            }
        </script>
    </div>
</div>